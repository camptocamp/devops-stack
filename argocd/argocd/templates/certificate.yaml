{{- if not .Values.bootstrap }}
---
apiVersion: cert-manager.io/v1alpha3
kind: Certificate
metadata:
  name: argocd
  namespace: argocd
  annotations:
    argocd.argoproj.io/sync-wave: "10"
spec:
  secretName: argocd-cert
  dnsNames:
    - argocd.apps.{{ $.Values.baseDomain }}
    - argocd.apps.{{ $.Values.clusterName }}.{{ $.Values.baseDomain }}
  issuerRef:
    name: selfsigned-issuer
    kind: ClusterIssuer
{{- end }}
