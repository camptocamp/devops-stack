<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EKS variant :: DevOps Stack</title>
    <meta name="generator" content="Antora 3.1.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GDBX9466LL"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-GDBX9466LL')</script>
    <script>var uiRootPath = '../../../_'</script>
    <link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://devops-stack.io"><img width="200px" src="../../../_/img/devops-stack-logo_light_by_c2c_black.png"/></a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/camptocamp/devops-stack"><i class="fa fa-github-alt"></i>&nbsp;GitHub</a>
        <a class="navbar-item" href="https://www.camptocamp.com">Camptocamp</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="thanos" data-version="v1.0.0-alpha.4">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../README.html">Thanos Module</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../README.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Module Variants</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="README.html">EKS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../latest/index.html"><em>Return to DevOps Stack docs</em></a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Thanos Module</span>
    <span class="version">v1.0.0-alpha.4</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../application/latest/README.html">Application Module</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../application/latest/README.html">v1.1.1</a>
        </li>
        <li class="version">
          <a href="../../../application/v1.1.0/README.html">v1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../application/v1.0.1/README.html">v1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../applicationset/latest/README.html">ApplicationSet Module</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../applicationset/latest/README.html">v1.1.1</a>
        </li>
        <li class="version">
          <a href="../../../applicationset/v1.1.0/README.html">v1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../applicationset/v1.0.0/README.html">v1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../latest/index.html">DevOps Stack</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../latest/index.html">v1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../kind/latest/README.html">KinD</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../kind/latest/README.html">v1.0.1</a>
        </li>
        <li class="version">
          <a href="../../../kind/v1.0.0/README.html">v1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../README.html">Thanos Module</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../README.html">v1.0.0-alpha.4</a>
        </li>
        <li class="version">
          <a href="../../v1.0.0-alpha.3/README.html">v1.0.0-alpha.3</a>
        </li>
        <li class="version">
          <a href="../../v1.0.0-alpha.2/README.html">v1.0.0-alpha.2</a>
        </li>
        <li class="version">
          <a href="../../v1.0.0-alpha.1/README.html">v1.0.0-alpha.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../README.html">Thanos Module</a></li>
    <li>Module Variants</li>
    <li><a href="README.html">EKS</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v1.0.0-alpha.4</button>
  <div class="version-menu">
    <a class="version is-current" href="README.html">v1.0.0-alpha.4</a>
    <a class="version" href="../../v1.0.0-alpha.3/eks/README.html">v1.0.0-alpha.3</a>
    <a class="version" href="../../v1.0.0-alpha.2/eks/README.html">v1.0.0-alpha.2</a>
    <a class="version" href="../../v1.0.0-alpha.1/eks/README.html">v1.0.0-alpha.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/camptocamp/devops-stack-module-thanos/blob/v1.0.0-alpha.4/docs/modules/ROOT/pages/eks/README.adoc"><i class="fa fa-github-alt"></i>&nbsp;Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">EKS variant</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This folder contains the variant to use when deploying in AWS using an EKS cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This module can be declared by adding the following block on your Terraform configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-terraform hljs" data-lang="terraform">module "thanos" {
  source = "git::https://github.com/camptocamp/devops-stack-module-thanos.git//eks"

  cluster_name            = var.cluster_name
  argocd_namespace        = module.cluster.argocd_namespace
  base_domain             = module.cluster.base_domain
  cluster_issuer          = var.cluster_issuer
  cluster_oidc_issuer_url = module.cluster.cluster_oidc_issuer_url

  thanos = {
    oidc = module.oidc.oidc
  }

  depends_on = [module.argocd_bootstrap]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A more complex complex declaration, one that changes the default values for the compactor retention times, would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-terraform hljs" data-lang="terraform">module "thanos" {
  source = "git::https://github.com/camptocamp/devops-stack-module-thanos.git//eks"

  cluster_name            = var.cluster_name
  argocd_namespace        = module.cluster.argocd_namespace
  base_domain             = module.cluster.base_domain
  cluster_issuer          = var.cluster_issuer
  cluster_oidc_issuer_url = module.cluster.cluster_oidc_issuer_url

  thanos = {
    oidc = module.oidc.oidc
    compactor_retention = {
      raw      = "60d"
      five_min = "120d"
      one_hour = "240d"
    }
  }

  depends_on = [module.argocd_bootstrap]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, you can customize the chart&#8217;s <code>values.yaml</code> by adding an Helm configuration as an HCL structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-terraform hljs" data-lang="terraform">module "thanos" {
  source = "git::https://github.com/camptocamp/devops-stack-module-thanos.git//eks"

  cluster_name            = var.cluster_name
  argocd_namespace        = module.cluster.argocd_namespace
  base_domain             = module.cluster.base_domain
  cluster_issuer          = var.cluster_issuer
  cluster_oidc_issuer_url = module.cluster.cluster_oidc_issuer_url

  thanos = {
    oidc = module.oidc.oidc
  }

  helm_values = [{ # Note the curly brackets here
    thanos = {
      map = {
        string = "string"
        bool   = true
      }
      sequence = [
        {
          key1 = "value1"
          key2 = "value2"
        },
        {
          key1 = "value1"
          key2 = "value2"
        },
      ]
      sequence2 = [
        "string1",
        "string2"
      ]
    }
  }]

  depends_on = [module.argocd_bootstrap]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see on the examples above, the variable <code>thanos</code> provides an interface to customize the most frequently used settings. This variable is merged with the local value <code>thanos_defaults</code>, which contains some sensible defaults. You can check the default values on the <a href="./local.tf"><code>local.tf</code></a> file.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This module was developed with OIDC in mind!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There is an OIDC proxy container deployed as a sidecar on each pod that has a web interface. Consequently, the <code>thanos</code> variable is expected to have a map <code>oidc</code> containing at least the Issuer URL, the Client ID, and the Client Secret.</p>
</div>
<div class="paragraph">
<p>You can pass these values by pointing an output from another module (as above), or by defining them explicitly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-terraform hljs" data-lang="terraform">module "thanos" {
  ...

  thanos = {
    oidc = {
      issuer_url    = "&lt;URL&gt;"
      client_id     = "&lt;ID&gt;"
      client_secret = "&lt;SECRET&gt;"
    }
  }

  ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technical_reference"><a class="anchor" href="#_technical_reference"></a>Technical Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dependencies"><a class="anchor" href="#_dependencies"></a>Dependencies</h3>
<div class="sect3">
<h4 id="_module_argocd_bootstrap"><a class="anchor" href="#_module_argocd_bootstrap"></a><code>module.argocd_bootstrap</code></h4>
<div class="paragraph">
<p>This module must be one of the first ones to be deployed and consequently it needs to be deployed exactly after the module <code>argocd_bootstrap</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>Requirements</h3>
<div class="paragraph">
<p>No requirements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_providers"><a class="anchor" href="#_providers"></a>Providers</h3>
<div class="paragraph">
<p>The following providers are used by this module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="provider_aws"></a> <a href="#provider_aws">aws</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_modules"><a class="anchor" href="#_modules"></a>Modules</h3>
<div class="paragraph">
<p>The following Modules are called:</p>
</div>
<div class="sect3">
<h4 id="_iam_assumable_role_thanos"><a class="anchor" href="#_iam_assumable_role_thanos"></a><a id="module_iam_assumable_role_thanos"></a> <a href="#module_iam_assumable_role_thanos">iam_assumable_role_thanos</a></h4>
<div class="paragraph">
<p>Source: terraform-aws-modules/iam/aws//modules/iam-assumable-role-with-oidc</p>
</div>
<div class="paragraph">
<p>Version: 4.0.0</p>
</div>
</div>
<div class="sect3">
<h4 id="_thanos"><a class="anchor" href="#_thanos"></a><a id="module_thanos"></a> <a href="#module_thanos">thanos</a></h4>
<div class="paragraph">
<p>Source: ../</p>
</div>
<div class="paragraph">
<p>Version:</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h3>
<div class="paragraph">
<p>The following resources are used by this module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_policy">aws_iam_policy.thanos_s3_policy</a> (resource)</p>
</li>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket">aws_s3_bucket.thanos_metrics_store</a> (resource)</p>
</li>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document">aws_iam_policy_document.thanos_s3_policy</a> (data source)</p>
</li>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region">aws_region.current</a> (data source)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_required_inputs"><a class="anchor" href="#_required_inputs"></a>Required Inputs</h3>
<div class="paragraph">
<p>The following input variables are required:</p>
</div>
<div class="sect3">
<h4 id="_argocd_namespace"><a class="anchor" href="#_argocd_namespace"></a><a id="input_argocd_namespace"></a> <a href="#input_argocd_namespace">argocd_namespace</a></h4>
<div class="paragraph">
<p>Description: Namespace used by Argo CD where the Application and AppProject resources should be created.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_base_domain"><a class="anchor" href="#_base_domain"></a><a id="input_base_domain"></a> <a href="#input_base_domain">base_domain</a></h4>
<div class="paragraph">
<p>Description: Base domain of the cluster. Value used for the ingress' URL of the application.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_cluster_name"><a class="anchor" href="#_cluster_name"></a><a id="input_cluster_name"></a> <a href="#input_cluster_name">cluster_name</a></h4>
<div class="paragraph">
<p>Description: Name given to the cluster. Value used for the ingress' URL of the application.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_cluster_oidc_issuer_url"><a class="anchor" href="#_cluster_oidc_issuer_url"></a><a id="input_cluster_oidc_issuer_url"></a> <a href="#input_cluster_oidc_issuer_url">cluster_oidc_issuer_url</a></h4>
<div class="paragraph">
<p>Description: The URL on the EKS cluster OIDC Issuer.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_inputs"><a class="anchor" href="#_optional_inputs"></a>Optional Inputs</h3>
<div class="paragraph">
<p>The following input variables are optional (have default values):</p>
</div>
<div class="sect3">
<h4 id="_cluster_issuer"><a class="anchor" href="#_cluster_issuer"></a><a id="input_cluster_issuer"></a> <a href="#input_cluster_issuer">cluster_issuer</a></h4>
<div class="paragraph">
<p>Description: SSL certificate issuer to use. Usually you would configure this value as <code>letsencrypt-staging</code> or <code>letsencrypt-prod</code> on your root <code>*.tf</code> files.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
<div class="paragraph">
<p>Default: <code>"ca-issuer"</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_dependency_ids"><a class="anchor" href="#_dependency_ids"></a><a id="input_dependency_ids"></a> <a href="#input_dependency_ids">dependency_ids</a></h4>
<div class="paragraph">
<p>Description: IDs of the other modules on which this module depends on.</p>
</div>
<div class="paragraph">
<p>Type: <code>map(string)</code></p>
</div>
<div class="paragraph">
<p>Default: <code>{}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_helm_values"><a class="anchor" href="#_helm_values"></a><a id="input_helm_values"></a> <a href="#input_helm_values">helm_values</a></h4>
<div class="paragraph">
<p>Description: Helm chart value overrides. They should be passed as a list of HCL structures.</p>
</div>
<div class="paragraph">
<p>Type: <code>any</code></p>
</div>
<div class="paragraph">
<p>Default: <code>[]</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_namespace"><a class="anchor" href="#_namespace"></a><a id="input_namespace"></a> <a href="#input_namespace">namespace</a></h4>
<div class="paragraph">
<p>Description: Namespace where the applications&#8217;s Kubernetes resources should be created. Namespace will be created in case it doesn&#8217;t exist.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
<div class="paragraph">
<p>Default: <code>"thanos"</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_target_revision"><a class="anchor" href="#_target_revision"></a><a id="input_target_revision"></a> <a href="#input_target_revision">target_revision</a></h4>
<div class="paragraph">
<p>Description: Override of target revision of the application chart.</p>
</div>
<div class="paragraph">
<p>Type: <code>string</code></p>
</div>
<div class="paragraph">
<p>Default: <code>"v1.0.0-rc2"</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_thanos_2"><a class="anchor" href="#_thanos_2"></a><a id="input_thanos"></a> <a href="#input_thanos">thanos</a></h4>
<div class="paragraph">
<p>Description: Most frequently used Thanos settings. This variable is merged with the local value <code>thanos_defaults</code>, which contains some sensible defaults. You can check the default values on the <a href="./local.tf"><code>local.tf</code></a> file. If there still is anything other that needs to be customized, you can always pass on configuration values using the variable <code>helm_values</code>.</p>
</div>
<div class="paragraph">
<p>Type: <code>any</code></p>
</div>
<div class="paragraph">
<p>Default: <code>{}</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_outputs"><a class="anchor" href="#_outputs"></a>Outputs</h3>
<div class="paragraph">
<p>The following outputs are exported:</p>
</div>
<div class="sect3">
<h4 id="_id"><a class="anchor" href="#_id"></a><a id="output_id"></a> <a href="#output_id">id</a></h4>
<div class="paragraph">
<p>Description: ID to pass other modules in order to refer to this module as a dependency. It takes the ID that comes from the main module and passes it along to the code that called this variant in the first place.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metrics_archives"><a class="anchor" href="#_metrics_archives"></a><a id="output_metrics_archives"></a> <a href="#output_metrics_archives">metrics_archives</a></h4>
<div class="paragraph">
<p>Description: Bucket configuration for <code>kube-prometheus-stack</code> and <code>thanos-sidecar</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_thanos_enabled"><a class="anchor" href="#_thanos_enabled"></a><a id="output_thanos_enabled"></a> <a href="#output_thanos_enabled">thanos_enabled</a></h4>
<div class="paragraph">
<p>Description: Boolean indicating wether Thanos is enabled.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reference_in_table_format"><a class="anchor" href="#_reference_in_table_format"></a>Reference in table format</h3>
<details>
<summary class="title">Show tables</summary>
<div class="content">
<div class="paragraph">
<p>= Providers</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="provider_aws"></a> <a href="#provider_aws">aws</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>= Modules</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="module_iam_assumable_role_thanos"></a> <a href="#module_iam_assumable_role_thanos">iam_assumable_role_thanos</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>terraform-aws-modules/iam/aws//modules/iam-assumable-role-with-oidc</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4.0.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="module_thanos"></a> <a href="#module_thanos">thanos</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>= Resources</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_policy">aws_iam_policy.thanos_s3_policy</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>resource</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket">aws_s3_bucket.thanos_metrics_store</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>resource</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document">aws_iam_policy_document.thanos_s3_policy</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>data source</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region">aws_region.current</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>data source</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>= Inputs</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_argocd_namespace"></a> <a href="#input_argocd_namespace">argocd_namespace</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Namespace used by Argo CD where the Application and AppProject resources should be created.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_base_domain"></a> <a href="#input_base_domain">base_domain</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Base domain of the cluster. Value used for the ingress' URL of the application.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_cluster_issuer"></a> <a href="#input_cluster_issuer">cluster_issuer</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SSL certificate issuer to use. Usually you would configure this value as <code>letsencrypt-staging</code> or <code>letsencrypt-prod</code> on your root <code>*.tf</code> files.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"ca-issuer"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_cluster_name"></a> <a href="#input_cluster_name">cluster_name</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name given to the cluster. Value used for the ingress' URL of the application.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_cluster_oidc_issuer_url"></a> <a href="#input_cluster_oidc_issuer_url">cluster_oidc_issuer_url</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The URL on the EKS cluster OIDC Issuer.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>n/a</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_dependency_ids"></a> <a href="#input_dependency_ids">dependency_ids</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>IDs of the other modules on which this module depends on.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>map(string)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>{}</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_helm_values"></a> <a href="#input_helm_values">helm_values</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Helm chart value overrides. They should be passed as a list of HCL structures.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>any</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>[]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_namespace"></a> <a href="#input_namespace">namespace</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Namespace where the applications&#8217;s Kubernetes resources should be created. Namespace will be created in case it doesn&#8217;t exist.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"thanos"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_target_revision"></a> <a href="#input_target_revision">target_revision</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Override of target revision of the application chart.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"v1.0.0-rc2"</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="input_thanos"></a> <a href="#input_thanos">thanos</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Most frequently used Thanos settings. This variable is merged with the local value <code>thanos_defaults</code>, which contains some sensible defaults. You can check the default values on the <a href="./local.tf"><code>local.tf</code></a> file. If there still is anything other that needs to be customized, you can always pass on configuration values using the variable <code>helm_values</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>any</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>{}</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>= Outputs</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="output_id"></a> <a href="#output_id">id</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ID to pass other modules in order to refer to this module as a dependency. It takes the ID that comes from the main module and passes it along to the code that called this variant in the first place.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="output_metrics_archives"></a> <a href="#output_metrics_archives">metrics_archives</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Bucket configuration for <code>kube-prometheus-stack</code> and <code>thanos-sidecar</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="output_thanos_enabled"></a> <a href="#output_thanos_enabled">thanos_enabled</a></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean indicating wether Thanos is enabled.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright © Camptocamp <script> document.write(new Date().getFullYear()) </script> — All Rights Reserved</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/terraform.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
