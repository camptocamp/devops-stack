= General Contributing Guidelines

This document describes the general guidelines for contributing to the DevOps Stack.

The DevOps Stack is a collection of modules, each of them having its own release cycle, in order to ease the development and maintenance of each module.

== Development Workflow

When a new feature or fix is required, the typical workflow is the following:

1. You should create a new branch from the `main` branch of the module you want to work on;
2. Work and test on your branch;
3. When you think you feature/fix is ready, create a Pull Request to merge your branch into the `main` branch.

The following subsections describe some of the best practices to follow when working on the DevOps Stack.

=== Branches

. Keep the `main` branch clean, and only merge Pull Requests into it.
. Create a new branch for each Pull Request. *The name of the branch should be the Jira ticket number, followed by a short description of the work done in the branch*, for example `ISDEVOPS-185-v1-docs`. This will allow the Jira ticket to be automatically linked to the branch and the Pull Request.

=== Conventional Commits

. When commiting to your branch, you should follow the https://www.conventionalcommits.org/[Conventional Commits] specification. *This will also allow the automated changelog generation to work properly.*

. We use the following commit types:


=== Pull Requests

. You can create Pull Requests from your branch any time during the development, but if it is not ready to be merged, you should mark it as a _Draft Pull Request_. This will prevent it from being merged by mistake while still allowing you to get feedback from other developers as well as the automated checks and documentation generation done by GitHub Actions.






== Module Creation Checklist

When first creating a module for the DevOps Stack, there are a few steps to follow:

1. Create a new repository in the https://github.com/camptocamp/[Camptocamp GitHub organization], using the https://github.com/camptocamp/devops-stack-module-template[repository template].
+
image::guides_tutorials/create_module_repository.png[Create Repository]

2. On the settings of the repository, in the _General_ tab, on the _Pull Requests_ section, disable the _Allow squash commits option and enable the _Automatically delete head branches_ option.

3. Then go to the _Collaborators and teams_ tab, add the `infrastructure-department` team as _Maintainers_ and the `is-devops-stack` team as _Administrators_.
+
image::guides_tutorials/change_collaborators.png[Change Collaborators]

4. Then go to the _Branches_ tab, and create a new branch protection rule for the `main` branch, with the following settings.
+
image::guides_tutorials/branch_protection_rule.png[Branch Protection Rule]

5. Afterwards, go to the https://github.com/orgs/camptocamp/teams/is-devops-stack/[`is-devops-stack` team], and add the repository to our scheduled reminder on Slack about pending Pull Requests.
+
image::guides_tutorials/add_repo_to_slack_reminder.png[Slack Reminder]

6. *_TODO Add a step about adding other notification to the Slack bot._*








_Talk about conventional commits, the way to mark breaking changes, available commit types and scopes, etc._

_Talk about the way to write a good commit message, the way to write a good PR title and description, etc._

_Talk about where to write issues (each module) and stuff like that._

_Talk about PRs._

_Name branchs after the Jira ticket number so it is automatically taken into account by our internal ticketing system._

_Talk about the importance of squashing commits on the PR before merging._

